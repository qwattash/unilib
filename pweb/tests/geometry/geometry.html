<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../css/unittest.css"/>
<title>Collision detection</title>
<script type="text/JavaScript" src="../../js/unilib/base.php"></script>
<script type="text/JavaScript" src="../../js/unilib/unittest.js"></script>
<script type="text/JavaScript">
  unilib.include('unilib/graphics/collision.js');
  test('boundingbox collision detection', function() {
    var box1 = new unilib.collision.BoundingBox();
    box1.corners = [
      new unilib.geometry.Point(0, 0),
      new unilib.geometry.Point(50, 50)];
    box2 = new unilib.collision.BoundingBox();
    box2.corners = [
      new unilib.geometry.Point(10, 10),
      new unilib.geometry.Point(60, 60)];
    box3 = new unilib.collision.BoundingBox();
    box3.corners = [
      new unilib.geometry.Point(60, 50),
      new unilib.geometry.Point(80, 100)];
    box4 = new unilib.collision.BoundingBox();
    box4.corners = [
      new unilib.geometry.Point(10, -10),
      new unilib.geometry.Point(60, 40)];
    box5 = new unilib.collision.BoundingBox();
    box5.corners = [
      new unilib.geometry.Point(-10, -10),
      new unilib.geometry.Point(20, 20)];
    box6 = new unilib.collision.BoundingBox();
    box6.corners = [
      new unilib.geometry.Point(-10, 30),
      new unilib.geometry.Point(40, 60)];
    box7 = new unilib.collision.BoundingBox();
    box7.corners = [
      new unilib.geometry.Point(10, 10),
      new unilib.geometry.Point(20, 20)];
    box8 = new unilib.collision.BoundingBox();
    box8.corners = [
      new unilib.geometry.Point(-10, -10),
      new unilib.geometry.Point(60, 60)];
    pointBox = new unilib.collision.BoundingBox();
    pointBox.corners = [
      new unilib.geometry.Point(25, 25),
      new unilib.geometry.Point(25, 25)];
    
    assertDeepEqual(box1.collide(box2), new unilib.geometry.Point(40, 0), 'corner collision (#1,#2)');
    assertEqual(box1.collide(box3), null, 'no collision (#1,#3)');
    assertDeepEqual(box1.collide(box4), new unilib.geometry.Point(40, 0), 'corner collision (#1,#4)');
    assertDeepEqual(box1.collide(box5), new unilib.geometry.Point(-20, 0), 'corner collision (#1,#5)');
    assertDeepEqual(box1.collide(box6), new unilib.geometry.Point(0, 20), 'corner collision (#1,#6)');
    assertDeepEqual(box1.collide(box7), new unilib.geometry.Point(-20, 0), 'penetration collision (#1,#7)');
    assertDeepEqual(box1.collide(box8), new unilib.geometry.Point(-60, 0), 'containment collision (#1,#8)');
    assertDeepEqual(box1.collide(pointBox), new unilib.geometry.Point(-25, 0), 'containment collision (#1,#point)');
  });
</script>
<body>
  <div id='unittest'></div>
</body>
</html>



